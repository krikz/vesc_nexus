<robot name="quad_robot">
  <ros2_control name="VescSystem" type="system">
    <hardware>
      <plugin>vesc_nexus/VescSystemHardwareInterface</plugin>
      <param name="can_interface">can0</param>
      <param name="publish_rate">50.0</param>
      <param name="wheel_radius">0.138</param>
      
      <!-- Минимальный duty cycle для преодоления мёртвой зоны VESC -->
      <param name="min_duty">0.08</param>
      
      <!-- PWM модуляция для ультра-низких скоростей (ниже min_duty) -->
      <!-- Если включена, для скоростей требующих duty < min_duty будет использоваться
           PWM модуляция: чередование duty_low и duty_high на частоте pwm_frequency -->
      <param name="pwm_modulation_enabled">false</param>
      <param name="pwm_duty_low">0.01</param>      <!-- Низкий duty для PWM (0.01-0.03) -->
      <param name="pwm_duty_high">0.1</param>      <!-- Высокий duty для PWM (обычно = min_duty) -->
      <param name="pwm_frequency">50.0</param>     <!-- Частота PWM в Гц -->
    </hardware>

    <joint name="left_front_wheel" type="continuous">
      <command_interface name="velocity"/>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
      <param name="can_id">49</param>
      <param name="poles">30</param>
      <param name="min_erpm">24</param>
      <param name="wheel_radius">0.138</param>
    </joint>

    <joint name="right_front_wheel" type="continuous">
      <command_interface name="velocity"/>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
      <param name="can_id">124</param>
      <param name="poles">30</param>
      <param name="min_erpm">24</param>
      <param name="wheel_radius">0.138</param>
    </joint>

    <joint name="left_rear_wheel" type="continuous">
      <command_interface name="velocity"/>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
      <param name="can_id">81</param>
      <param name="poles">30</param>
      <param name="min_erpm">24</param>
      <param name="wheel_radius">0.138</param>
    </joint>

    <joint name="right_rear_wheel" type="continuous">
      <command_interface name="velocity"/>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
      <param name="can_id">94</param>
      <param name="poles">30</param>
      <param name="min_erpm">24</param>
      <param name="wheel_radius">0.138</param>
    </joint>
  </ros2_control>
</robot>